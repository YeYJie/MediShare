<!doctype html>
<html>
	<head>
		<meta charset="utf-8">
		<meta http-equiv="X-UA-Compatible" content="IE=edge">
		<meta name="viewport" content="width=device-width, initial-scale=1">
		<title>BCG-Share</title>
		<link href="https://cdn.bootcss.com/bootstrap/3.3.7/css/bootstrap.min.css" rel="stylesheet">
		<style type="text/css">
			.btn-group.special {
				display: flex;
			}

			.special .btn {
				flex: 1
			}
		</style>
	</head>
	<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css" integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" crossorigin="anonymous">
	<script src="https://code.jquery.com/jquery-3.2.1.slim.min.js" integrity="sha384-KJ3o2DKtIkvYIK3UENzmM7KCkRr/rE9/Qpg6aAZGJwFDMVNA/GpGFF93hXpG5KkN" crossorigin="anonymous"></script>
	<script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js" integrity="sha384-JZR6Spejh4U02d8jOt6vLEHfe/JQGiRRSQQxSfFWpi1MquVdAyjUar5+76PVCmYl" crossorigin="anonymous"></script>
	<script src="/socket.io/socket.io.js"></script>
	<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
	<script>


	$(function () {

		var socket = io();

		var buildNormalRowHTML = function(fileId, fileName, fileVersion, fileSize, department, uploader,
							time, needAuthorization, buttonId) {
			var date = new Date(parseInt(time) * 1000);
			console.log("data    "+date);
			var y = date.getFullYear();
			var m = date.getMonth() + 1;
			var d = date.getDate();
			console.log("DDDDDD   "+d);
			return '<tr><td>' + fileName +'</td>'
					+'<td>' + fileVersion +'</td>'
					+'<td>' + fileSize +'</td>'
					+'<td>' + department +'</td>'
					+'<td>' + uploader +'</td>'
					+'<td>' + y + '-' + m + '-' + d +'</td>'
					+'<td>' + needAuthorization +'</td>'
					+'<td><button id="' + buttonId + '" fileSize="' + fileSize + '" data-fileId="' + fileId
					+ '" needAuthorization="' + needAuthorization + '" fileName="'+fileName+'" class="btn btn-lg btn-primary btn-block">查看文件</button></td></tr>'
		};
		var buildDbRowHTML = function(fileId, fileName, fileVersion, department, uploader,
							time, needAuthorization, buttonId) {
			var date = new Date(parseInt(time) * 1000);
			console.log("data    "+date);
			var y = date.getFullYear();
			var m = date.getMonth() + 1;
			var d = date.getDate();
			var fileSize = "-1";
			console.log("DDDDDD   "+d);
			return '<tr><td>' + fileName +'</td>'
					+'<td>' + fileVersion +'</td>'
					+'<td>' + department +'</td>'
					+'<td>' + uploader +'</td>'
					+'<td>' + y + '-' + m + '-' + d +'</td>'
					+'<td>' + needAuthorization +'</td>'
					+'<td><button id="' + buttonId + '" fileSize="' + fileSize + '" data-fileId="' + fileId
					+ '" needAuthorization="' + needAuthorization + '" fileName="'+fileName+'" class="btn btn-lg btn-primary btn-block">数据库入口</button></td></tr>'
		};

		socket.on('show', function(data) {
			//location.reload();
			//location.replace(location.href);
			//location.reload(true);
			console.log("1,抱歉！您所属部门没有访问权限！");
			alert("抱歉！您所属部门没有访问权限！");
			console.log("2,抱歉！您所属部门没有访问权限！");
		});

		var fillFileList = function(data, normalTableId, dbTableId) {
			$("#" + normalTableId + " tr:not(:first)").empty("");
			$("#" + dbTableId + " tr:not(:first)").empty("");

			var timestamp = new Date().valueOf().toString();

			for(var i = 0; i < data.files.length; ++i) {
				console.log(data.files[i]);
				var file = data.files[i];
				//
				if(file.Department == "1")
					var c = "教育局";
				var d;
				if(file.NeedAuthorization == true)
					d = "需要";
				else
					d = "不需要";

				var buttonId = "fileList-request-button-"+file.FileId + timestamp;

				var e = file.FileSize;
				if (e =="-1"){
					var fileHTML = buildDbRowHTML(file.FileId, file.FileName,
						file.FileVersion, c,file.Uploader, file.UploadTime, d,
						buttonId);
					$('#' + dbTableId + ' > tbody:last').append(fileHTML);
				}
				else{
					var fileHTML = buildNormalRowHTML(file.FileId, file.FileName,
						file.FileVersion, file.FileSize, c,file.Uploader, file.UploadTime, d,
						buttonId);
					$('#' + normalTableId + ' > tbody:last').append(fileHTML);
				}

				$('#'+buttonId).click(function(){
					var needAuthorization = $(this).attr('needAuthorization');
					if(needAuthorization == "需要"){
						needAuthorization = "true";
					}
					else{
						needAuthorization = "false";
					}

					var fileId = $(this).attr('data-fileId');
					var fileName = $(this).attr('fileName');
					var fileSize = $(this).attr('fileSize');

					if(needAuthorization === "true") {//need
						console.log("emit requestFileAuthorization " + fileId);
						socket.emit('requestFileAuthorization', {fileId: fileId,fileName:fileName,fileSize:fileSize});
					}
					else {//no need---public
						console.log("emit requestFile " + fileId);
						socket.emit('requestFile', {fileId: fileId,fileName:fileName,fileSize:fileSize});
					}

				});
			}
		}

		socket.on('fileList', function(data) {
			console.log(data);
			fillFileList(data, "normalTable", "dbTable");
			showFileListPannel();
		});
		socket.on('searchResult', function(data) {
			console.log(data);
			fillFileList(data, "normalTable-searchResult", "dbTable-searchResult");

			hideSearchPannel();
			showSearchResultPannel();
		});
		socket.on('fileEntry', function(data) {
			var entry = data.entry;
			var fileId = data.fileId;
			var fileName = data.fileName;
			var fileSize = data.fileSize;
			console.log(fileId);
			console.log(data);
			console.log("EEEEEEEE  "+entry);
			console.log("EEEEEEEE  "+fileSize);

			if(fileSize == "-1"){
				entry = entry + "/table.txt";
				console.log("fileSize  -1");
				console.log(entry);
				$("#modal-check").attr("href", entry);
				$("#modal-check").attr("target",  "_blank");
				$("#modal-download").attr("download", "table.txt");
				$("#modal-download").attr("target",  "_blank");
			}
			else{
				entry = entry + "/" + fileName;
				console.log(entry);
				$("#modal-check").attr("href", entry);
				$("#modal-check").attr("target",  "_blank");
				$("#modal-download").attr("href", entry);
				$("#modal-download").attr("download", fileName);
				$("#modal-download").attr("target",  "_blank");
			}
			$("#myModal").modal('show');
		});

		var id;
		var ftype;
		var role;
		var onFileListPage = false;

		var showUploadPannel = function() {
			document.getElementById("upload").style.display = "block";
			if(ftype === "normal")
				document.getElementById("uploadNormal").style.display = "block";
			else if(ftype === "db")
				document.getElementById("uploadDb").style.display = "block";
			else
				console.log("showUploadPannel", "error ftype: ", ftype);
			document.getElementById("upload-pannel-button").style.display = "block";
		}
		var hideUploadPannel = function() {
			document.getElementById("upload").style.display = "none";
			document.getElementById("uploadNormal").style.display = "none";
			document.getElementById("uploadDb").style.display = "none";
			document.getElementById("upload-pannel-button").style.display = "none";
		}

		var showFileListPannelButton = function() {
			if(role === "worker")
				document.getElementById("fileList-worker-button").style.display = "block";
			else if(role === "admin")
				document.getElementById("fileList-admin-button").style.display = "block";
			else
				console.log("showFileListPannelButton", "error role: ", role);
		}
		var hideFileListPannelButton = function() {
			document.getElementById("fileList-worker-button").style.display = "none";
			document.getElementById("fileList-admin-button").style.display = "none";
		}

		var showFileListPannel = function() {
			document.getElementById("normalfile").style.display = "none";
			document.getElementById("databasefile").style.display = "none";
			if(ftype === "normal")
				document.getElementById("normalfile").style.display = "block";
			else if(ftype === "db")
				document.getElementById("databasefile").style.display = "block";
			else
				console.log("showFileListPannel", "error ftype: ", ftype);
			showFileListPannelButton();
			onFileListPage = true;
		};
		var hideFileListPannel = function() {
			document.getElementById("normalfile").style.display = "none";
			document.getElementById("databasefile").style.display = "none";
			hideFileListPannelButton();
			onFileListPage = false;
		};


		var showSearchResultPannel = function() {
			document.getElementById("normalfile-searchResult").style.display = "none";
			document.getElementById("databasefile-searchResult").style.display = "none";
			if(ftype === "normal")
				document.getElementById("normalfile-searchResult").style.display = "block";
			else if(ftype === "db")
				document.getElementById("databasefile-searchResult").style.display = "block";
			else
				console.log("showSearchResultPannel", "error ftype: ", ftype);
			document.getElementById("searchResult-pannel-button").style.display = "block";
			onFileListPage = false;
		};
		var hideSearchResultPannel = function() {
			document.getElementById("normalfile-searchResult").style.display = "none";
			document.getElementById("databasefile-searchResult").style.display = "none";
			document.getElementById("searchResult-pannel-button").style.display = "none";
			onFileListPage = false;
		};


		var showSearchPannel = function() {
			document.getElementById("search").style.display = "block";
			document.getElementById("search-pannel-button").style.display = "block";
		}
		var hideSearchPannel = function() {
			document.getElementById("search").style.display = "none";
			document.getElementById("search-pannel-button").style.display = "none";
		}

		$('#login-button').click(function(){
			document.getElementById("outer-wrap").style.display = "none";
			document.getElementById("nav").style.display = "block";
			document.getElementById("sidebar").style.display = "block";

			id = document.getElementById("login-id").value;
			role = $('input[name=identity]:checked').val();
			ftype = "normal";
			// $('input[name="filelist_filetype"]')[0].checked =  true
			showFileListPannel();

			$('#login-pwd').val("");
			$("#normalTable tr:not(:first)").empty("");
			$("#dbTable tr:not(:first)").empty("");

			socket.emit('login', {id: $('#login-id').val(), pwd: $('#login-pwd').val()});
		})


		$('#logout').click(function(){
			document.getElementById("nav").style.display = "none";
			document.getElementById("sidebar").style.display = "none";
			document.getElementById("outer-wrap").style.display = "block";
			hideFileListPannel();
			hideSearchPannel();
			hideUploadPannel();
			ftype = "";
			role = "";

			$("#normalTable tr:not(:first)").empty("");
			$("#dbTable tr:not(:first)").empty("");
			$("#normalTable-searchResult tr:not(:first)").empty("");
			$("#dbTable-searchResult tr:not(:first)").empty("");
		})



		$('.fileList-search').click(function(){
			if(ftype === "normal")
				document.getElementById("search-pageHeader").innerHTML = "查找文件";
			else if(ftype === "db")
				document.getElementById("search-pageHeader").innerHTML = "查找数据库入口";
			hideFileListPannel();
			showSearchPannel();
		})



		$('#fileList-upload').click(function(){

			if(ftype === "normal")
				document.getElementById('normalUploader').value = id;
			else if(ftype === "db")
				document.getElementById('dbUploader').value = id;
			else
				console.log("fileList-upload error ftype: ", ftype);

			hideFileListPannel();
			showUploadPannel();
		})

		var getAuthorizationPattern = function() {
			return $('input[name="radio"]:checked').val();
		}

		var getAuthorizedDepartmentList = function() {
			var res = [];

			var pattern = getAuthorizationPattern();
			if(pattern === "1")
				return res;
			else if(pattern === "3") {
				res.push("1")
				return res;
			}

			var departmentList = document.getElementsByName("au_department");
			if(!departmentList) return res;
			for(var i = 0; i < departmentList.length; i++) {
				if(departmentList[i].checked)
					res.push(departmentList[i].value);
			}
			return res;
		}

		var uploadNormal = function() {
			console.log('uploadNormal');

			var formData = new FormData();
			formData.append("uploadText", $('#uploadText').val());
			formData.append('uploadFile', $('#uploadFile')[0].files[0]);
			console.log(formData);

			// get data
			//var a = $('#uploadFile').val();
			//var fileName = a.substring(12);
			/*var date = new Date(parseInt(time) * 1000);
			console.log("upload  "+date);*/
			var fileName = $('#uploadFile')[0].files[0].name;
			//$('#uploadFile').outerHTML=$('#uploadFile').outerHTML.replace(/(value=\").+\"/i,"$1\"");
			//var fileSize = "1k";
			var fileSize = document.getElementById("uploadFile").files[0].size;
			if(fileSize < 1025)
				fileSize = fileSize + "B";
			else if(fileSize > 1024*1024)
				fileSize = (fileSize/(1024*1024.0)).toFixed(2) + "M";
			else
				fileSize = (fileSize/1024.0).toFixed(2) + "K";


			var fileChecksum = "aaa";
			var uploader = document.getElementById('login-id').value;
			var myDate = new Date();
			var b = myDate.getTime();
			var uploadTime = Math.floor(new Date().valueOf() / 1000).toString();

			var authorization = getAuthorizationPattern();
			var authorization_department = getAuthorizedDepartmentList();
			console.log(authorization, authorization_department);

			console.log("emit upload " );
			socket.emit('upload',{fileName:fileName,fileSize:fileSize,fileChecksum:fileChecksum,
				uploader:uploader,uploadTime:uploadTime,authorization:authorization,
				authorization_department:authorization_department});

			$.ajax({
				type: "POST",
				url: "/upload",
				data: formData,
				contentType: false,
				processData: false,
				success: function(text) {
					// MvcUtil.showSuccessResponse(text, button);
					console.log(text);
					document.getElementById("fileList").style.display = "none";
					document.getElementById("upload").style.display = "block";
					return false;
				},
				error: function(xhr) {
					// MvcUtil.showErrorResponse(xhr.responseText, button);
					return false;
				}
			});
		}

		var uploadDb = function() {
			console.log('uploadDb');
			var datacontent = document.getElementById('datacontent').value;
			var databaseip = document.getElementById('databaseip').value;
			var databaseport = document.getElementById('databaseport').value;
			var databasename = document.getElementById('databasename').value;
			var tablename = document.getElementById('tablename').value;

			var uploader = document.getElementById('login-id').value;
			var myDate = new Date();
			var b = myDate.getTime();
			var uploadTime = Math.floor(new Date().valueOf() / 1000).toString();

			var authorization1 = getAuthorizationPattern();
			var authorization_department1 = getAuthorizedDepartmentList();
			console.log(authorization1, authorization_department1);//true

			console.log("emit upload " );
			socket.emit('upload1',{datacontent:datacontent,databaseip:databaseip,
				databaseport:databaseport,databasename:databasename,tablename:tablename,
				uploader:uploader,uploadTime:uploadTime,authorization1:authorization1,
				authorization_department1:authorization_department1});
		}

		$("#upload-button").click(function(){
			if(ftype === "normal")
				uploadNormal();
			else if(ftype === "db")
				uploadDb();
			else
				console.log("upload-button error ftype: ", ftype);
		});



		$('#search-name-button').click(function(){
			var name = $('#search-name').val();
			$('#search-name').val("");
			console.log('search-name: ' + name);
			socket.emit('searchByName', {name: name});
		})
		$('#search-time-button').click(function(){
			var begin = $('#search-time-begin').val();
			var end = $('#search-time-end').val();
			$('#search-time-begin').val("");
			$('#search-time-end').val("");
			if(begin !== "")
				console.log('search-time-begin: ' + begin);
			if(end !== "")
				console.log('search-time-end: ' + end);
			socket.emit('searchByTime', {begin: begin, end:end});
		})
		$('#search-department-button').click(function(){
			var department = $('#search-department').val();
			if (department == "教育局"){
				department = "1";
			}
			var begin = $('#search-department-begin').val();
			var end = $('#search-department-end').val();
			$('#search-department').val("");
			$('#search-department-begin').val("");
			$('#search-department-end').val("");
			console.log("DDDD "+department);
			console.log('search-department: ' + department);
			if(begin !== "")
				console.log('search-department-begin: ' + begin);
			if(end !== "")
				console.log('search-department-end: ' + end);
			socket.emit('searchByDepartment', {department: department, begin: begin, end:end});
		})
		$('#search-uploader-button').click(function(){
			var uploader = $('#search-uploader').val();
			var begin = $('#search-uploader-begin').val();
			var end = $('#search-uploader-end').val();
			$('#search-uploader').val("");
			$('#search-uploader-begin').val("");
			$('#search-uploader-end').val("");
			console.log('search-uploader: ' + uploader);
			if(begin !== "")
				console.log('search-uploader-begin: ' + begin);
			if(end !== "")
				console.log('search-uploader-end: ' + end);
			socket.emit('searchByUploader', {uploader: uploader, begin: begin, end:end});
		})



		$('#search-goback').click(function(){
			hideSearchPannel();
			showFileListPannel();
		})


		$('#searchResult-goback').click(function(){
			hideSearchResultPannel();
			showSearchPannel();
		})

		$('#upload-goback').click(function(){
			hideUploadPannel();
			showFileListPannel();

			//update filelist
			$("#normalTable tr:not(:first)").empty("");
			$("#dbTable tr:not(:first)").empty("");
			socket.emit('login', {id: $('#login-id').val(), pwd: $('#login-pwd').val()});
		})

		$("#normal-sidebar").click(function(){
			ftype = "normal";
			hideUploadPannel();
			hideSearchPannel();
			showFileListPannel();
		});
		$("#db-sidebar").click(function(){
			ftype = "db";
			hideUploadPannel();
			hideSearchPannel();
			showFileListPannel();
		});


		$('input[name="radio"]').click(function(){
			var val = $('input[name="radio"]:checked').val();
			if(val === "2")
				document.getElementById("partialpublic").style.display = "block";
			else
				document.getElementById("partialpublic").style.display = "none";
		});

	});

	</script>
	<body>

<nav class="navbar navbar-dark bg-dark" id="nav" style="display: none;">
	<h1 class="pull-left" style="color: white">BCG-Share</h1>
	<div class="pull-right">
		<h1 style="color: white">linsiyi</h1>
	</div>
</nav>

<div class="container-fluid" id="after-login" style="display: block;">
	<div class="row">


		<div class="col-md-2 sidebar" id="sidebar" style="display: none;">
<!-- 			<p><input type="radio" name="filelist_filetype" value="normal" checked>文件</p>
			<p><input type="radio" name="filelist_filetype" value="db">数据库入口</p>
			<p><button id="logout">退出登录</button></p> -->
			<ul class="nav">
				<li style="width: 100%;">
					<a href="#" id="normal-sidebar"><h4>文件</h4></a>
				</li>
				<li style="width: 100%;">
					<a href="#" id="db-sidebar"><h4>数据库入口</h4></a>
				</li>
				<li style="width: 100%;">
					<a href="#" id="logout"><h4>退出登录</h4></a>
				</li>
			</ul>


		</div>

		<div class="col-md-10 main">

		<div>
			<div id="normalfile" style="display: none;">
				<h2 class="page-header" style="margin-top: 20px;">文件列表</h2>
				<table id="normalTable" class="table table-striped">
					<thead>
						<th>文件名</th>
						<th>版本号</th>
						<th>文件大小</th>
						<th>上传单位</th>
						<th>上传者</th>
						<th>上传时间</th>
						<th>是否需要访问权限</th>
						<th></th>
					</thead>
					<tbody></tbody>
				</table>
			</div>
			<div id="databasefile" style="display: none;">
				<h2 class="page-header" style="margin-top: 20px;">数据库列表</h2>
				<table id="dbTable" class="table table-striped">
					<thead>
						<th>数据内容</th>
						<th>版本号</th>
						<th>上传单位</th>
						<th>上传者</th>
						<th>上传时间</th>
						<th>是否需要访问权限</th>
						<th></th>
					</thead>
					<tbody></tbody>
				</table>
			</div>
		</div>

		<div>
			<div id="normalfile-searchResult" style="display: none;">
				<h2 class="page-header" style="margin-top: 20px;">查找结果</h2>
				<table id="normalTable-searchResult" class="table table-striped">
					<thead>
						<th>文件名</th>
						<th>版本号</th>
						<th>文件大小</th>
						<th>上传单位</th>
						<th>上传者</th>
						<th>上传时间</th>
						<th>是否需要访问权限</th>
						<th></th>
					</thead>
					<tbody></tbody>
				</table>
			</div>
			<div id="databasefile-searchResult" style="display: none;">
				<h2 class="page-header" style="margin-top: 20px;">查找结果</h2>
				<table id="dbTable-searchResult" class="table table-striped">
					<thead>
						<th>数据内容</th>
						<th>版本号</th>
						<th>上传单位</th>
						<th>上传者</th>
						<th>上传时间</th>
						<th>是否需要访问权限</th>
						<th></th>
					</thead>
					<tbody></tbody>
				</table>
			</div>
		</div>


		<div id="search" style="display: none;">
			<h2 class="page-header" style="margin-top: 20px;" id="search-pageHeader">查找文件</h2>

			<p><fieldset>
			<legend>按文件名查找:</legend>
			<input type="text" id="search-name">
			<button id="search-name-button">查找</button>
			</fieldset></p>

			<p><fieldset>
			<legend>按时间查找:</legend>
			<input type="date" id="search-time-begin">
			<input type="date" id="search-time-end">
			<button id="search-time-button">查找</button>
			</fieldset></p>

			<p><fieldset>
			<legend>按单位查找:</legend>
			<input type="text" id="search-department">
			<input type="date" id="search-department-begin">
			<input type="date" id="search-department-end">
			<button id="search-department-button">查找</button>
			</fieldset></p>

			<p><fieldset>
			<legend>按上传者查找:</legend>
			<input type="text" id="search-uploader">
			<input type="date" id="search-uploader-begin">
			<input type="date" id="search-uploader-end">
			<button id="search-uploader-button">查找</button>
			</fieldset></p>
		</div>



		<div id="upload" style="display: none">
			<div id="uploadNormal" style="display: none">
				<h2 class="page-header" style="margin-top: 20px;">上传文件</h2>
				<div class="form-group row">
					<label for="staticDepartment" class="col-sm-2 col-form-label">单位</label>
					<div class="col-sm-10">
						<input type="text" readonly class="form-control-plaintext" id="staticDepartment" value="教育局">
					</div>
				</div>
				<div class="form-group row">
					<label for="normalUploader" class="col-sm-2 col-form-label">上传者</label>
					<div class="col-sm-10">
						<input type="text" readonly class="form-control-plaintext" id="normalUploader" value="">
					</div>
				</div>
				<div class="form-group row">
					<label for="uploadFile" class="col-sm-2 col-form-label">文件</label>
					<div class="col-sm-10">
						<form ref='uploadForm' id='uploadForm' action='/upload' method='post' encType="multipart/form-data">
							<input type="file" id="uploadFile" />
						</form>
					</div>
				</div>
			</div>
			<div id="uploadDb" style="display: none">
				<h2 class="page-header" style="margin-top: 20px;">上传数据库入口</h2>
				<div class="form-group row">
					<label for="staticDepartment" class="col-sm-2 col-form-label">单位</label>
					<div class="col-sm-10">
						<input type="text" readonly class="form-control-plaintext" id="staticDepartment" value="教育局">
					</div>
				</div>
				<div class="form-group row">
					<label for="dbUploader" class="col-sm-2 col-form-label">上传者</label>
					<div class="col-sm-10">
						<input type="text" readonly class="form-control-plaintext" id="dbUploader" value="">
					</div>
				</div>
				<div class="form-group row">
					<label for="datacontent" class="col-sm-2 col-form-label">数据内容</label>
					<div class="col-sm-10">
						<input type="text" class="form-control" id="datacontent" placeholder="">
					</div>
				</div>
				<div class="form-group row">
					<label for="databaseip" class="col-sm-2 col-form-label">数据库地址</label>
					<div class="col-sm-10">
						<input type="text" class="form-control" id="databaseip" placeholder="">
					</div>
				</div>
				<div class="form-group row">
					<label for="databaseport" class="col-sm-2 col-form-label">连接端口</label>
					<div class="col-sm-10">
						<input type="text" class="form-control" id="databaseport" placeholder="">
					</div>
				</div>
				<div class="form-group row">
					<label for="databasename" class="col-sm-2 col-form-label">数据库名称</label>
					<div class="col-sm-10">
						<input type="text" class="form-control" id="databasename" placeholder="">
					</div>
				</div>
				<div class="form-group row">
					<label for="tablename" class="col-sm-2 col-form-label">表单名称</label>
					<div class="col-sm-10">
						<input type="text" class="form-control" id="tablename" placeholder="">
					</div>
				</div>
			</div>


			 <fieldset class="form-group">
				<div class="row">
					<label class="col-sm-2 col-form-label">文件访问控制</label>
					<div class="col-sm-10">
						<div class="radio">
						 <label><input name="radio" value="1" type="radio">公开</label>
						</div>
						<div class="radio">
						 <label><input name="radio" value="2" type="radio">部分公开</label>
						</div>
						<div class="radio">
						 <label><input name="radio" value="3" type="radio">仅自己单位可见</label>
						</div>
					</div>
				</div>
			 </fieldset>

			<fieldset class="form-group" id="partialpublic" style="display: none;">
				<div class="row">
					<label class="col-sm-2 col-form-label">选择文件可访问的单位</label>
					<div class="col-sm-10">
						<div class="row">
							<div class="col-sm-2">
									<label style="width: 100%;"><input type="checkbox" name="au_department" value="1" checked> <span class="label-text">教育局</span></label>
									<label style="width: 100%;"><input type="checkbox" name="au_department" value="2"><span class="label-text">公安局</span></label>
									<label style="width: 100%;"><input type="checkbox" name="au_department" value="3"><span class="label-text">财政局</span></label>
									<label style="width: 100%;"><input type="checkbox" name="au_department" value="4"><span class="label-text">卫生局</span></label>
									<label style="width: 100%;"><input type="checkbox" name="au_department" value="5"><span class="label-text">文化局</span></label>
							</div>
							<div class="col-sm-2">
									<label style="width: 100%;"><input type="checkbox" name="au_department" value="6"><span class="label-text">体育局</span></label>
									<label style="width: 100%;"><input type="checkbox" name="au_department" value="7"><span class="label-text">民政局</span></label>
									<label style="width: 100%;"><input type="checkbox" name="au_department" value="8"><span class="label-text">司法局</span></label>
									<label style="width: 100%;"><input type="checkbox" name="au_department" value="9"><span class="label-text">监察局</span></label>
									<label style="width: 100%;"><input type="checkbox" name="au_department" value="10"><span class="label-text">旅游局</span></label>
							</div>
							<div class="col-sm-2">
									<label><input type="checkbox" name="au_department" value="11"><span class="label-text">交通委员会</span></label>
									<label><input type="checkbox" name="au_department" value="12"><span class="label-text">环境保护局</span></label>
									<label><input type="checkbox" name="au_department" value="13"><span class="label-text">建设委员会</span></label>
									<label><input type="checkbox" name="au_department" value="14"><span class="label-text">农业委员会</span></label>
							</div>
							<div class="col-sm-2">
									<label><input type="checkbox" name="au_department" value="15"><span class="label-text">外事办公室</span></label>
									<label><input type="checkbox" name="au_department" value="16"><span class="label-text">广播电视局</span></label>
									<label><input type="checkbox" name="au_department" value="17"><span class="label-text">科学技术局</span></label>
									<label><input type="checkbox" name="au_department" value="18"><span class="label-text">新闻出版局</span></label>
							</div>
						</div>
					</div>
				</div>
			</fieldset>
		</div>




		</div>

		<div class="row" id="fileList-worker-button" style="display: none;">
			<div style="position: fixed; right: 50px; bottom: 50px; height: 100px; width: 300px;">
				<p><button class="fileList-search btn btn-lg btn-primary btn-block">查找</button></p>
			</div>
		</div>
		<div class="row" id="fileList-admin-button" style="display: none;">
			<div style="position: fixed; right: 50px; bottom: 50px; height: 100px; width: 300px;">
				<p><button class="fileList-search btn btn-lg btn-primary btn-block">查找</button></p>
				<p><button id="fileList-upload" class="btn btn-lg btn-primary btn-block">上传</button></p>
			</div>
		</div>


		<div class="row" id="upload-pannel-button" style="display: none;">
			<div style="position: fixed; right: 50px; bottom: 50px; height: 100px; width: 300px;">
				<p><button id="upload-button" class="btn btn-lg btn-primary btn-block">提交</button></p>
				<p><button id="upload-goback" class="btn btn-lg btn-primary btn-block">返回</button></p>
			</div>
		</div>
		<div class="row" id="search-pannel-button" style="display: none;">
			<div style="position: fixed; right: 50px; bottom: 50px; height: 100px; width: 300px;">
				<p><button id="search-goback" class="btn btn-lg btn-primary btn-block">返回</button></p>
			</div>
		</div>
		<div class="row" id="searchResult-pannel-button" style="display: none;">
			<div style="position: fixed; right: 50px; bottom: 50px; height: 100px; width: 300px;">
				<p><button id="searchResult-goback" class="btn btn-lg btn-primary btn-block">返回</button></p>
			</div>
		</div>

	</div>
</div>


<div class="container" id="outer-wrap" style="display: block;">
	<!-- <div class="row"> -->
	<div class="row" style="padding-top:100px;">
		<div class="col-md-4 col-md-offset-4">
			<div class="panel panel-default">
				<div class="panel-heading">
					<div class="panel-title pull-left">BCG-Share</div>
					<div class="panel-title pull-right" id="login-department">教育局</div>
					<div class="clearfix"></div>

				</div>
				<div class="panel-body">
					<fieldset>
						<div class="form-group">
							<input class="form-control" placeholder="用户名" type="text" id="login-id" autocomplete="off">
						</div>
						<div class="form-group">
							<input class="form-control" placeholder="密码" type="password" id="login-pwd" autocomplete="off">
						</div>
						<div class="form-group">
							<div class="btn-group special" data-toggle="buttons">
							<label class="btn btn-default active form-check-label col-md-6">
								<input class="form-check-input" type="radio" name="identity" value="admin" checked autocomplete="off">管理员
							</label>
							<label class="btn btn-default form-check-label col-md-6 col-md-offset-6">
								<input class="form-check-input" type="radio" name="identity" value="worker" autocomplete="off">普通员工
							</label>
							</div>
						</div>
						<div class="checkbox">
							<label>
								<input name="remember" type="checkbox" value="Remember Me"> Remember Me
							</label>
						</div>
						<button id="login-button" class="btn btn-lg btn-success btn-block">登录</button>
					</fieldset>
				</div>
			</div>
		</div>
	</div>
</div>


<!-- <div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true"> -->
<div class="modal" id="myModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
	<div class="modal-dialog modal-sm" role="document">
		<div class="modal-content">
			<div class="modal-header">
				<h5 class="modal-title" id="exampleModalLabel">查看文件</h5>
				<button type="button" class="close" data-dismiss="modal" aria-label="Close">
				<span aria-hidden="true">&times;</span>
				</button>
			</div>
			<div class="modal-body">
				<div class="form-group">
					<a id="modal-check" class="form-control btn btn-lg btn-success btn-block">直接查看</a>
				</div>
				<div class="form-group">
					<a id="modal-download" class="form-control btn btn-lg btn-success btn-block">下载</a>
				</div>
			</div>
			<div class="modal-footer">
				<button type="button" class="btn btn-secondary" data-dismiss="modal">返回</button>
			</div>
		</div>
	</div>
</div>


	<script src="https://cdn.bootcss.com/jquery/1.12.4/jquery.min.js"></script>
	<script>window.jQuery || document.write('<script src="../../assets/js/vendor/jquery.min.js"><\/script>')</script>
	<script src="https://cdn.bootcss.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>

  </body>
</html>
