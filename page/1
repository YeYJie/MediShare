for(var i = 0; i < data.files.length; ++i) {
	console.log(data.files[i]);
	var file = data.files[i];
	//
	if(file.Department == "1")
		var c = "教育局";
	var d;
	if(file.NeedAuthorization == true)
		d = "需要";
	else
		d = "不需要";
	//
	var e = file.FileSize;
	if (e =="-1"){
		var fileHTML = buildDbRowHTML(file.FileId, file.FileName, file.FileVersion, c,file.Uploader, file.UploadTime, d,"fileList-request-button-"+file.FileId);
		$('#dbTable > tbody:last').append(fileHTML);
	}
	else{
		var fileHTML = buildNormalRowHTML(file.FileId, file.FileName, file.FileVersion, file.FileSize, c,file.Uploader, file.UploadTime, d,"fileList-request-button-"+file.FileId);
		$('#normalTable > tbody:last').append(fileHTML);
	}

	$('#fileList-request-button-' + file.FileId).click(function(){
		var needAuthorization = $(this).attr('needAuthorization');
		if(needAuthorization == "需要"){
			needAuthorization = "true";
		}
		else{
			needAuthorization = "false";
		}

		var fileId = $(this).attr('data-fileId');
		var fileName = $(this).attr('fileName');
		var fileSize = $(this).attr('fileSize');
		/*if(fileSize == "-1"){
			if(needAuthorization === "true") {//need
				console.log("emit requestFileAuthorization1 " + fileId);
				socket.emit('requestFileAuthorization1', {fileId: fileId,fileName:fileName});
			}
			else {//no need---public
				console.log("emit requestFile1 " + fileId);
				socket.emit('requestFile1', {fileId: fileId,fileName:fileName});
			}
		}
		else{*/
			if(needAuthorization === "true") {//need
				console.log("emit requestFileAuthorization " + fileId);
				socket.emit('requestFileAuthorization', {fileId: fileId,fileName:fileName,fileSize:fileSize});
			}
			else {//no need---public
				console.log("emit requestFile " + fileId);
				socket.emit('requestFile', {fileId: fileId,fileName:fileName,fileSize:fileSize});
			}
		/*}*/

	});
}
